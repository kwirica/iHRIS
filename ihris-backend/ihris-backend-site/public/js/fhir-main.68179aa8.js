"use strict";(self["webpackChunkiHRIS_v5"]=self["webpackChunkiHRIS_v5"]||[]).push([[2251],{2761:function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.hide?e._e():s("v-container",[s("v-autocomplete",{attrs:{loading:e.loading,label:e.label,items:e.items.filter((function(e){return!e.code.includes("(deactivated)")})),outlined:"","hide-details":"auto","error-messages":e.errors,"item-text":"display","item-value":"code",rules:e.rules,dense:"",clearable:""},on:{change:function(t){e.errors=[]}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.$t("App.fhir-resources-texts."+e.label))+" "),e.required?s("span",{staticClass:"red--text font-weight-bold"},[e._v("*")]):e._e()]},proxy:!0}],null,!1,3654946902),model:{value:e.valueCode,callback:function(t){e.valueCode=t},expression:"valueCode"}})],1)},a=[],l=s(8247),o=s(1997),r={name:"fhir-coding",props:["id","field","definition","label","path","binding","edit","min","max","constraints","displayCondition","enableBehavior","slotProps","initial"],mixins:[o.x],data:function(){return{value:{system:"",code:"",display:""},hiddenVal:"",savedValueCode:"",valueCode:"",loading:!0,errors:[],items:[],source:{path:"",data:{},binding:this.binding},qField:"valueCoding",lockWatch:!1}},created:function(){this.hideShowField(this.displayCondition,this.enableBehavior),this.setupData(),this.initial&&!this.$route.params.id&&(this.value=this.initial)},watch:{hide(e){e?(this.hiddenVal=this.valueCode,this.valueCode="",this.value={system:"",code:"",display:""}):this.valueCode=this.hiddenVal},slotProps:{handler(){this.lockWatch||this.setupData()},deep:!0},valueCode:function(){this.items&&(this.value=this.items.find((e=>e.code===this.valueCode))),this.value?l.Y.$emit(this.path,this.value.system+"#"+this.value.code):l.Y.$emit(this.path,"")}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{},binding:this.binding||this.slotProps.source.binding},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.savedValueCode=this.source.data,this.lockWatch=!0;else{let e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e);let t=null;if(1==this.source.data.length)t=this.source.data[0];else{let e,s=this.path.split("[");for(let t of s){let s=t.split("]");Number.isInteger(parseInt(s[0]))&&(e=s[0])}(e||0==e)&&(t=this.source.data[e])}null!=t&&("object"===typeof t?(this.value=t,this.savedValueCode=this.value.code):this.savedValueCode=t,this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}let e=this.binding||this.slotProps.source.binding;this.$fhirutils.expand(e).then((e=>{this.items=e;let t=this.items.find((e=>this.savedValueCode&&e.code===this.savedValueCode));t&&(this.value=t),this.value&&(this.valueCode=this.value.code),this.loading=!1})).catch((e=>{console.log(e),this.errors.push(e.message),this.loading=!1}))}},computed:{required:function(){return this.min>0},rules:function(){return this.required?[e=>!!e||this.label+" is required"]:[]}}},n=r,h=s(3736),u=s(3453),d=s.n(u),c=s(1835),p=s(4228),f=(0,h.Z)(n,i,a,!1,null,null,null),v=f.exports;d()(f,{VAutocomplete:c.Z,VContainer:p.Z})},7218:function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.hide?e._e():s("ihris-element",{attrs:{edit:e.edit,loading:!1},scopedSlots:e._u([{key:"form",fn:function(){return[s("v-textarea",{attrs:{"error-messages":e.errors,disabled:e.disabled,label:e.display,outlined:"","hide-details":"auto",rules:e.rules,dense:""},on:{change:function(t){e.errors=[]}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.$t("App.fhir-resources-texts."+e.display))+" "),e.required?s("span",{staticClass:"red--text font-weight-bold"},[e._v("*")]):e._e()]},proxy:!0}],null,!1,3110236810),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]},proxy:!0},{key:"header",fn:function(){return[e._v(" "+e._s(e.$t("App.fhir-resources-texts."+e.display))+" ")]},proxy:!0},{key:"value",fn:function(){return[e._v(" "+e._s(e.value)+" ")]},proxy:!0}],null,!1,865592460)})},a=[],l=s(2130),o=s(8247),r=s(1997),n={name:"fhir-text",props:["field","label","min","max","path","edit","sliceName","slotProps","base-min","base-max","readOnlyIfSet","constraints","displayCondition"],components:{IhrisElement:l.Z},mixins:[r.x],data:function(){return{source:{path:"",data:{}},value:"",qField:"valueText",disabled:!1,errors:[],lockWatch:!1}},created:function(){this.hideShowField(this.displayCondition),this.setupData()},watch:{slotProps:{handler(){this.lockWatch||this.setupData()},deep:!0},value(e){o.Y.$emit(this.path,e)}},methods:{setupData(){if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{let e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e);let t=null;if(1==this.source.data.length)t=this.source.data[0];else{let e,s=this.path.split("[");for(let t of s){let s=t.split("]");Number.isInteger(parseInt(s[0]))&&(e=s[0])}(e||0==e)&&(t=this.source.data[e])}null!=t&&(this.value=t,this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}}},computed:{index:function(){return this.slotProps?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},required:function(){return(this.index||0)<this.min},rules:function(){return this.required?[e=>!!e||this.display+" is required"]:[]}}},h=n,u=s(3736),d=s(3453),c=s.n(d),p=s(4350),f=(0,u.Z)(h,i,a,!1,null,null,null),v=f.exports;c()(f,{VTextarea:p.Z})}}]);
//# sourceMappingURL=fhir-main.68179aa8.js.map